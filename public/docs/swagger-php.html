<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-09-22T17:52:12.9350031"><title>SwaggerPHP step by step | Inventory System Docs</title><script type="application/json" id="virtual-toc-data">[{"id":"1-install-dependencies","level":0,"title":"1. Install dependencies","anchor":"#1-install-dependencies"},{"id":"2-setup-swagger-documentation","level":0,"title":"2. Setup swagger documentation","anchor":"#2-setup-swagger-documentation"},{"id":"3-configure-controller-php","level":0,"title":"3. Configure Controller.php","anchor":"#3-configure-controller-php"},{"id":"4-setup-autoloader","level":0,"title":"4. Setup autoloader","anchor":"#4-setup-autoloader"},{"id":"5-setup-swagger-ui","level":0,"title":"5. Setup Swagger-UI","anchor":"#5-setup-swagger-ui"},{"id":"6-auto-generate-new-docs","level":0,"title":"6. Auto-generate new docs","anchor":"#6-auto-generate-new-docs"},{"id":"7-possible-errors","level":0,"title":"7. Possible errors","anchor":"#7-possible-errors"},{"id":"references","level":0,"title":"References","anchor":"#references"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="SwaggerPHP step by step | Inventory System Docs"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Inventory System Docs Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/swagger-php.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="SwaggerPHP step by step | Inventory System Docs"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/swagger-php.html#webpage",
    "url": "writerside-documentation/swagger-php.html",
    "name": "SwaggerPHP step by step | Inventory System Docs",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Inventory System Docs Help"
}</script><!-- End Schema.org --></head><body data-id="Swagger-PHP" data-main-title="SwaggerPHP step by step" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="General-Setup.md|General Setup"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Inventory System Docs  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Swagger-PHP" id="Swagger-PHP.md">SwaggerPHP step by step</h1><figure id="z5087dp_3"><img alt="SWE-logo-clr.png" src="images/SWE-logo-clr.png" title="SWE-logo-clr.png" width="536" height="116"></figure><section class="chapter"><h2 id="1-install-dependencies" data-toc="1-install-dependencies">1. Install dependencies</h2><ul class="list _bullet" id="z5087dp_12"><li class="list__item" id="z5087dp_13"><p>Install swagger-php via composer to your project <code class="code" id="z5087dp_16">composer require zircote/swagger-php</code></p></li><li class="list__item" id="z5087dp_14"><p>Install doctrine annotations <code class="code" id="z5087dp_17">composer require doctrine/annotations</code></p></li><li class="list__item" id="z5087dp_15"><p>Download Swagger-UI https://swagger.io/tools/swagger-ui/download/</p></li></ul></section><section class="chapter"><h2 id="2-setup-swagger-documentation" data-toc="2-setup-swagger-documentation">2. Setup swagger documentation</h2><ul class="list _bullet" id="z5087dp_18"><li class="list__item" id="z5087dp_21"><p>In your project root, create folder <code class="code" id="z5087dp_25">documentation</code></p></li><li class="list__item" id="z5087dp_22"><p>Find downloaded Swagger-UI and copy everything from <code class="code" id="z5087dp_26">dist</code> to <code class="code" id="z5087dp_27">documentation/swagger</code> folder (create swagger folder if you didn't)</p></li><li class="list__item" id="z5087dp_23"><p>Note that you need to change paths for all files inside <code class="code" id="z5087dp_28">swagger/index.html</code> since it has been moved</p></li><li class="list__item" id="z5087dp_24"><p>Now create <code class="code" id="z5087dp_29">generate-docs.php</code> file inside <code class="code" id="z5087dp_30">documentation</code> folder</p></li></ul><div class="code-block" data-lang="php">
&lt;?php
  require(&quot;vendor/autoload.php&quot;);

  //Generate docs
  $openapi = \OpenApi\Generator::scan(['/path/to/project']);

  //Write new docs to .json file
  $jsonDoc = fopen(&quot;swagger-docs.json&quot;, &quot;w&quot;);
  fwrite($jsonDoc, $openapi-&gt;toJson());
  fclose($jsonDoc);
  echo 'Done, check root folder of this script for .json docs';

</div><aside class="prompt" data-type="tip" data-title="" id="z5087dp_20"><p id="z5087dp_31">Note: <code class="code" id="z5087dp_32">['/path/to/project']</code> is path where your <code class="code" id="z5087dp_33">Controller.php</code> class is stored or where all of your controllers are stored, usually something like <code class="code" id="z5087dp_34">src/App/Controllers</code> or <code class="code" id="z5087dp_35">src/Controllers</code></p></aside></section><section class="chapter"><h2 id="3-configure-controller-php" data-toc="3-configure-controller-php">3. Configure Controller.php</h2><ul class="list _bullet" id="z5087dp_36"><li class="list__item" id="z5087dp_37"><p id="z5087dp_42">First, add proper namespace to your class, for example, if your Controller.php is in <code class="code" id="z5087dp_43">Controllers</code> folder namespace would be <code class="code" id="z5087dp_44">namespace Controllers</code></p></li><li class="list__item" id="z5087dp_38"><p id="z5087dp_45">Configure <code class="code" id="z5087dp_46">using</code> for annotations like <code class="code" id="z5087dp_47">use OpenApi\Annotations as OA;</code></p></li><li class="list__item" id="z5087dp_39"><p id="z5087dp_48">Add <code class="code" id="z5087dp_49">@OA\Info</code> annotation to your controller</p></li><li class="list__item" id="z5087dp_40"><p id="z5087dp_50">The same goes for every method in your controller, add proper annotations <code class="code" id="z5087dp_51">@OA\Get</code> and <code class="code" id="z5087dp_52">@OA\Response</code></p></li><li class="list__item" id="z5087dp_41"><p id="z5087dp_53">Finally, you should end up with something similar to this</p><div class="code-block" data-lang="php">
namespace Controller;
use OpenApi\Annotations as OA;
/**
 * @OA\Info(title=&quot;Inventory managment system API&quot;, version=&quot;1.0&quot;)
 */
class Controller {
  	/**
	     * @OA\Get(
	     *     path=&quot;/api/resource/&quot;,
	     * 	   tags={&quot;Student&quot;},
	     *     @OA\Response(response=&quot;200&quot;, description=&quot;An example resource&quot;)
	     * )
	     */
	     public function returnInteger():int
	     {
		      return 5;
	     }
}
</div><aside class="prompt" data-type="tip" data-title="" id="z5087dp_55"><p id="z5087dp_56">Note: This is very basic setup of swagger-docs, thus not much info will be provided later in Swagger-UI For more information about annotations and options you have, please visit https://zircote.github.io/swagger-php/guide/annotations.html Also, if you are looking for references, you can check https://zircote.github.io/swagger-php/reference/annotations.html</p></aside></li></ul></section><section class="chapter"><h2 id="4-setup-autoloader" data-toc="4-setup-autoloader">4. Setup autoloader</h2><ul class="list _bullet" id="z5087dp_57"><li class="list__item" id="z5087dp_59"><p id="z5087dp_69">Solution provided here won't work straight away</p></li><li class="list__item" id="z5087dp_60"><p id="z5087dp_70">We need to tell autoloader where to look for our controller</p></li><li class="list__item" id="z5087dp_61"><p id="z5087dp_71">In <code class="code" id="z5087dp_72">composer.json</code> add following at the very top of the file</p></li><li class="list__item" id="z5087dp_62"><p id="z5087dp_73">Your composer.json should look similar to this (assuming that <code class="code" id="z5087dp_75">controllers/</code> folder is in the root folder of your php project)</p><div class="code-block" data-lang="json">
{
  &quot;autoload&quot;: {
    &quot;psr-4&quot;: {
      &quot;Controllers\\&quot;: &quot;./controllers/&quot;
    }
},
&quot;require&quot;: {
  &quot;zircote/swagger-php&quot;: &quot;4.7.*&quot;
  }
}
</div></li><li class="list__item" id="z5087dp_63"><p id="z5087dp_76">Now open the terminal from your php project root folder and type the following command <code class="code" id="z5087dp_77">composer dump-autoload</code></p></li><li class="list__item" id="z5087dp_64"><p id="z5087dp_78">That should be it</p></li><li class="list__item" id="z5087dp_65"><p id="z5087dp_79">Open <code class="code" id="z5087dp_80">generate-docs.php</code> from your web server, you should end up with message <code class="code" id="z5087dp_81">Done, check the root folder of this script for .json docs</code></p></li><li class="list__item" id="z5087dp_66"><p id="z5087dp_82">Whenever you want to override current documentation (json) , just visit <code class="code" id="z5087dp_83">generate-docs.php</code> page</p></li><li class="list__item" id="z5087dp_67"><p id="z5087dp_84">Now you should be able to see <code class="code" id="z5087dp_85">swagger-docs.json</code> inside <code class="code" id="z5087dp_86">documentation</code> folder</p></li><li class="list__item" id="z5087dp_68"><p id="z5087dp_87">NOTE: You can tell autoloader to look for controllers in whole dir, for example <code class="code" id="z5087dp_88">&quot;&quot;: &quot;./src/&quot;</code></p></li></ul><aside class="prompt" data-type="tip" data-title="" id="z5087dp_58"><p id="z5087dp_89">Note: at the time of writing this solution, the latest stable version of swagger-php is <code class="code" id="z5087dp_90">4.8.7</code> and Swagger-UI is at <code class="code" id="z5087dp_91">5.11.0</code>, while a PHP version used in this project is <code class="code" id="z5087dp_92">PHP 8.2</code></p></aside></section><section class="chapter"><h2 id="5-setup-swagger-ui" data-toc="5-setup-swagger-ui">5. Setup Swagger-UI</h2><ul class="list _bullet" id="z5087dp_93"><li class="list__item" id="z5087dp_97"><p>Now when we have swagger docs generated, we need to show them in swagger-ui</p></li><li class="list__item" id="z5087dp_98"><p>Open <code class="code" id="z5087dp_101">index.html</code> file and look up for <code class="code" id="z5087dp_102">&lt;script src=&quot;./swagger-initializer.js&quot; charset=&quot;UTF-8&quot;&gt;&lt;/script&gt;</code></p></li><li class="list__item" id="z5087dp_99"><p>Open <code class="code" id="z5087dp_103">swagger-initializer.js</code> file and change location of .json documentation from <code class="code" id="z5087dp_104">https://petstore.swagger.io/v2/swagger.json</code> to <code class="code" id="z5087dp_105">../swagger-docs.json</code></p></li><li class="list__item" id="z5087dp_100"><p>Your <code class="code" id="z5087dp_106">swagger-initializer.js</code> now should look like this</p></li></ul><aside class="prompt" data-type="tip" data-title="" id="z5087dp_94"><p id="z5087dp_107">Note: New location of JSON file is added while assuming that your <code class="code" id="z5087dp_108">swagger-docs.json</code> file is in <code class="code" id="z5087dp_109">documentation</code> folder</p></aside><div class="code-block" data-lang="javascript">
window.onload = function () {
  //&lt;editor-fold desc=&quot;Changeable Configuration Block&quot;&gt;

  // the following lines will be replaced by docker/configurator, when it runs in a docker-container
  window.ui = SwaggerUIBundle({
    url: &quot;../swagger-docs.json&quot;,
    dom_id: &quot;#swagger-ui&quot;,
    deepLinking: true,
    presets: [SwaggerUIBundle.presets.apis, SwaggerUIStandalonePreset],
    plugins: [SwaggerUIBundle.plugins.DownloadUrl],
    layout: &quot;StandaloneLayout&quot;,
  });

  //&lt;/editor-fold&gt;
};
</div><ul class="list _bullet" id="z5087dp_96"><li class="list__item" id="z5087dp_110"><p>That's it, now visit <code class="code" id="z5087dp_111">localhost/yourproject/documentation/swagger/</code></p></li></ul></section><section class="chapter"><h2 id="6-auto-generate-new-docs" data-toc="6-auto-generate-new-docs">6. Auto-generate new docs</h2><ul class="list _bullet" id="z5087dp_112"><li class="list__item" id="z5087dp_115"><p>Until now, we had to visit <code class="code" id="z5087dp_120">generate-docs.php</code> file if we wanted to generate or override .json docs</p></li><li class="list__item" id="z5087dp_116"><p>This can be automatized</p></li><li class="list__item" id="z5087dp_117"><p>First, rename <code class="code" id="z5087dp_121">documentation</code> folder to <code class="code" id="z5087dp_122">swagger</code></p></li><li class="list__item" id="z5087dp_118"><p><code class="code" id="z5087dp_123">swagger/swagger</code> folder rename to <code class="code" id="z5087dp_124">ui</code></p></li><li class="list__item" id="z5087dp_119"><p><code class="code" id="z5087dp_125">generate-docs.php</code> rename to <code class="code" id="z5087dp_126">index.php</code> and modify it</p></li></ul><div class="code-block" data-lang="php">
&lt;?php
  require(&quot;vendor/autoload.php&quot;);

  //Generate docs
  $openapi = \OpenApi\Generator::scan(['/path/to/project']);

  //Write new docs to .json file
  $jsonDoc = fopen(&quot;swagger-docs.json&quot;, &quot;w&quot;);
  fwrite($jsonDoc, $openapi-&gt;toJson());
  fclose($jsonDoc);
  //echo 'Done, check root folder of this script for .json docs';
  header(&quot;Location: ./ui&quot;)

</div><ul class="list _bullet" id="z5087dp_114"><li class="list__item" id="z5087dp_127"><p>Each time you visit <code class="code" id="z5087dp_128">yourproject/swagger</code> new docs will be generated</p></li></ul></section><section class="chapter"><h2 id="7-possible-errors" data-toc="7-possible-errors">7. Possible errors</h2><section class="chapter"><h3 id="0-check-if-all-dependencies-are-installed" data-toc="0-check-if-all-dependencies-are-installed">0. Check if all dependencies are installed</h3><ul class="list _bullet" id="z5087dp_133"><li class="list__item" id="z5087dp_134"><p>Some errors could be triggered if some dep are not installed</p></li><li class="list__item" id="z5087dp_135"><p>In my case, I forgot to install <code class="code" id="z5087dp_136">composer require doctrine/annotations</code> and even tho I had everything set up, annotations didn't work</p></li></ul></section><section class="chapter"><h3 id="1-warning-skipping-unknown-class-at-line-31" data-toc="1-warning-skipping-unknown-class-at-line-31">1. Warning: Skipping unknown \Class ... at line 31</h3><ul class="list _bullet" id="z5087dp_137"><li class="list__item" id="z5087dp_138"><p>https://github.com/zircote/swagger-php/issues/1136</p></li><li class="list__item" id="z5087dp_139"><p>http://zircote.github.io/swagger-php/guide/faq.html#skipping-unknown-someclass</p></li></ul></section><section class="chapter"><h3 id="2-warning-required-oa-info-not-found" data-toc="2-warning-required-oa-info-not-found">2. Warning: Required @OA\Info() not found</h3><ul class="list _bullet" id="z5087dp_140"><li class="list__item" id="z5087dp_141"><p>http://zircote.github.io/swagger-php/guide/faq.html#warning-required-oa-info-not-found</p></li></ul></section><section class="chapter"><h3 id="3-unable-to-merge-oa-get-post" data-toc="3-unable-to-merge-oa-get-post">3. Unable to merge @OA\Get &hellip; Post</h3><ul class="list _bullet" id="z5087dp_142"><li class="list__item" id="z5087dp_143"><p>This is happening probably because two methods have annotations with same path, check param path in these annotations</p></li></ul></section></section><section class="chapter"><h2 id="references" data-toc="references">References</h2><section class="chapter"><h3 id="php-swagger" data-toc="php-swagger">php-swagger:</h3><ul class="list _bullet" id="z5087dp_147"><li class="list__item" id="z5087dp_148"><p>https://github.com/zircote/swagger-php</p></li><li class="list__item" id="z5087dp_149"><p>https://zircote.github.io/swagger-php/</p></li></ul></section><section class="chapter"><h3 id="swagger-ui" data-toc="swagger-ui">Swagger-UI:</h3><ul class="list _bullet" id="z5087dp_150"><li class="list__item" id="z5087dp_151"><p>https://swagger.io/</p></li><li class="list__item" id="z5087dp_152"><p>https://swagger.io/tools/swagger-ui/</p></li></ul></section><section class="chapter"><h3 id="doctrine-annotations" data-toc="doctrine-annotations">Doctrine Annotations</h3><ul class="list _bullet" id="z5087dp_153"><li class="list__item" id="z5087dp_154"><p>https://github.com/doctrine/annotations</p></li><li class="list__item" id="z5087dp_155"><p>https://www.doctrine-project.org/projects/annotations.html</p></li></ul></section></section><div class="last-modified">Last modified: 22 septembar 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="general-setup.html" class="navigation-links__prev">General Setup</a><a href="apache-virtual-hosts.html" class="navigation-links__next">Apache Virtual Hosts</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b408/app.js"></script></body></html>